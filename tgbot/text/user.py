import os
import random

import requests

from database.database import get_user_wallet, get_wallets


def get_price(symbol):
    res = requests.get(f'https://api.binance.com/api/v1/ticker/24hr?symbol=BTC{symbol}')

    if res.status_code == 200:
        price = float(res.json()['lastPrice'])
        return price


def to_fixed(numObj, digits=0):
    return f"{numObj:.{digits}}"


name_service = os.environ.get("BOT_NICKNAME")
telegram_support = os.environ.get("TELEGRAM_SUPPORT")
review_chat = os.environ.get("REVIEW_CHAT")
news_channel = os.environ.get("NEWS_CHANNEL")
monopoly_bot = os.environ.get("MONOPOLY_BOT")
mixer_bot = os.environ.get('USERNAME_BOT')

start_text = f"""
<b><a href="https://i.imgur.com/6RtGCgR.png">ü§ñ</a>–ë–æ—Ç –ú–∏–∫—Å–µ—Ä!</b>
   
–£ –Ω–∞—Å —Ç—ã –º–æ–∂–µ—à—å –∑–∞–º–∏–∫—Å–æ–≤–∞—Ç—å —Å–≤–æ–∏ BTC –∏ –ø–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —á–∏—Å—Ç—ã–µ –º–æ–Ω–µ—Ç—ã –Ω–∞ –≤—ã—Ö–æ–¥–µ.

–ñ–º–∏ –∫–Ω–æ–ø–∫—É ¬´‚ö°Ô∏è–ó–∞–º–∏–∫—Å–æ–≤–∞—Ç—å BTC¬ª –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –≤–≤–µ–¥–∏ —Å—É–º–º—É BTC.

–ü—Ä–∏–º–µ—Ä: 0.001 –∏–ª–∏ 0,001
 
<b>–†–µ–∑–µ—Ä–≤: 2.000000 BTC</b>
"""

commision_text = """
<a href="https://i.imgur.com/ozWobSf.png">üí∞</a> –£—Å–ª–æ–≤–∏—è —Ä–∞–±–æ—Ç—ã —Å BTC Monopoly Mixer : 

–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ —Å–¥–µ–ª–∫–∏ : 0.001 BTC 

–ö–æ–º–∏—Å—Å–∏—è —Å–µ—Ä–≤–∏—Å–∞ : 

–û—Ç 0.5 BTC | 1,7%

–û—Ç 0.3 –¥–æ 0.5 BTC | 1,9%

–û—Ç 0.1 –¥–æ 0.3 BTC | 2,7%

–û—Ç 0.03 –¥–æ 0.1 BTC | 3%

–û—Ç 0.01 –¥–æ 0.03 BTC | 3,3%

–û—Ç 0.004 –¥–æ 0.01 BTC | 3,5%

–û—Ç 0.001 –¥–æ 0.004 BTC | 6,5%
"""

feedback_text = f"""
<a href="https://i.imgur.com/7LmKrnz.png">‚è∞</a>–ö—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–∞—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞:

@{telegram_support} | –û–ø–µ—Ä–∞—Ç–æ—Ä 24/7 –Ω–∞ —Å–≤—è–∑–∏ –∏ –ø–æ–º–æ–∂–µ—Ç —Å —Ä–µ—à–µ–Ω–∏–µ–º –ª—é–±–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞.

üîó–ù–æ–≤–æ—Å—Ç–Ω–æ–π –∫–∞–Ω–∞–ª BTC MONOPOLY:

@{news_channel} | –ù–∞—à –Ω–æ–≤–æ—Å—Ç–Ω–æ–π –∫–∞–Ω–∞–ª, –≥–¥–µ –º—ã –ø—É–±–ª–∏–∫—É–µ–º –∞–∫—Ç—É–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é —Å–≤—è–∑–∞–Ω–Ω—É—é —Å –Ω–∞—à–∏–º —Å–µ—Ä–≤–∏—Å–æ–º.

‚ö°Ô∏è–û–±–º–µ–Ω–Ω–∏–∫ BTC MONOPOLY:

@{monopoly_bot} | –ù–∞—à –æ–±–º–µ–Ω–Ω–∏–∫. –ü–æ–∫—É–ø–∞–π –∏ –ø—Ä–æ–¥–∞–≤–∞–π BTC. –ê–Ω–æ–Ω–∏–º–Ω–æ, –±—ã—Å—Ç—Ä–æ –∏ –≤—ã–≥–æ–¥–Ω–æ.
"""

buy_sell_text = f"""
<b><a href="https://i.imgur.com/4oVLmwd.png">ü§ñ</a>–û–ë–ú–ï–ù–ù–ò–ö BTC MONOPOLY</b>

–•–æ—á–µ—à—å –ø—Ä–æ–¥–∞—Ç—å/–∫—É–ø–∏—Ç—å BTC –ø–æ —Å–∞–º–æ–º—É –≤—ã–≥–æ–¥–Ω–æ–º—É –∫—É—Ä—Å—É? –ü–µ—Ä–µ—Ö–æ–¥–∏ –≤ @{monopoly_bot}.
"""

partner_text = """
<b><a href="https://i.imgur.com/ZTWLQyE.png">üìà</a>–£—Å–ª–æ–≤–∏—è –ø–∞—Ä—Ç–Ω–µ—Ä—Å–∫–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã:</b>

–ü—Ä–∏–≥–ª–∞—à–∞–µ–º –∫ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤—É –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –†–µ–∫–æ–º–µ–Ω–¥—É–π—Ç–µ –Ω–∞—à —Å–µ—Ä–≤–∏—Å, –¥–µ–ª–∏—Ç–µ—Å—å —Å–≤–æ–µ–π —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–æ–π –∏ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –ø–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥.

–ü–æ–ª—É—á–∞–π—Ç–µ 0,5% —Å –∫–∞–∂–¥–æ–π —Å–¥–µ–ª–∫–∏.

–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –Ω–∞ –≤—ã–≤–æ–¥: 0.001 BTC
"""


def my_partner_link(id):
    return f"""
<a href="https://i.imgur.com/ZTWLQyE.png">–í–∞—à–∞</a> —Å—Å—ã–ª–∫–∞ –¥–ª—è –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤: 

https://t.me/{mixer_bot}?start={id}
–í–∞—à–∞ —Å—Å—ã–ª–∫–∞ –¥–ª—è –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤:
    """


def my_finance_text():
    return """
–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ : 0

–û–ø–ª–∞—á–µ–Ω–Ω—ã—Ö –∑–∞—è–≤–æ–∫ : 0

–ù–∞ –±–∞–ª–∞–Ω—Å–µ : 0 BTC

–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –Ω–∞ –≤—ã–≤–æ–¥: 0.001 BT
    """


out_back_text = """
–ü–æ–∫–∞ —á—Ç–æ —É –í–∞—Å –Ω–µ—Ç –ø–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∏—Ö –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–π.

–í—ã —Å–º–æ–∂–µ—Ç–µ –∑–∞–ø—Ä–æ—Å–∏—Ç—å –≤—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤, –µ—Å–ª–∏ —Å—É–º–º–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã—Ö –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–π –¥–æ—Å—Ç–∏–≥–ª–∞ –∏–ª–∏ –ø—Ä–µ–≤—ã—à–∞–µ—Ç 0.001 BTC
"""

mix_text = """
–£–∫–∞–∂–∏—Ç–µ —Å—É–º–º—É –≤ <a href="https://i.imgur.com/PzbRj8m.png">BTC</a> :
–ü—Ä–∏–º–µ—Ä : 0.001 –∏–ª–∏ 0,001
"""

add_bitcoin = """
<a href="https://i.imgur.com/AsGQfPZ.png">üí∞</a> –£–∫–∞–∂–∏—Ç–µ BTC –∫–æ—à–µ–ª–µ–∫. –ù–∞ –¥–∞–Ω–Ω—ã–π –∫–æ—à–µ–ª–µ–∫ –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—á–∏—â–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞.
"""


async def order_text(id):
    user = await get_user_wallet(id)
    amount_btc = user[-1]
    if ',' in user[-1]:
        amount_btc = user[-1].replace(',', '.')
    num_order = random.randint(00000000, 99999999)

    get_btc = round(float(amount_btc) - (float(amount_btc) / 100 * 6.5), 6)

    # my_bitcoin_address = os.environ.get('BITCOIN_ADDRESS')
    my_bitcoin_address = get_wallets()

    return f"""
*üìù–í–∞—à –∑–∞–∫–∞–∑ ‚Ññ{num_order} —Å–æ–∑–¥–∞–Ω*

–ò—Ç–æ–≥–æ –∫ –æ–ø–ª–∞—Ç–µ : {amount_btc} BTC

–í—ã –ø–æ–ª—É—á–∏—Ç–µ –Ω–∞ –∫–æ—à–µ–ª–µ–∫ : {get_btc} BTC

üí∏–ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã —Å—Ä–µ–¥—Å—Ç–≤–∞ –±—É–¥—É—Ç –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –Ω–∞ –∫–æ—à–µ–ª–µ–∫:
*
{user[2]}
*

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å, –∏–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å –æ–ø–ª–∞—Ç–æ–π, –ø–∏—à–∏—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∫–µ : *@{telegram_support}*

üîó–û–ø–ª–∞—Ç–∏–ª–∏ –∑–∞—è–≤–∫—É? –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–û–ø–ª–∞—Ç–∏–ª".

üëá –ü–µ—Ä–µ–≤–µ–¥–∏—Ç–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ –Ω–∞ –¥–∞–Ω–Ω—ã–π –∫–æ—à–µ–ª–µ–∫: üëá

```{my_bitcoin_address[1]}```
"""

referral_link_text = '‚ùó –ù–µ–ª—å–∑—è —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –ø–æ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–µ!'
